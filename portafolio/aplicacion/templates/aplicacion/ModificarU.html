<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Modificar Usuarios</title>

<!--JQuery-->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script> 

<!-- Bootstrap CSS -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css" integrity="sha384-xOolHFLEh07PJGoPkLv1IbcEPTNtaed2xpHsD9ESMhqIYd0nLMwNLD69Npy4HI+N" crossorigin="anonymous">
<link type="text/css" rel="stylesheet" href="/static/aplicacion/css/inicio.css"/>

</head>
<body style="background: rgb(27, 90, 122);">

  <div><nav class="navbar navbar-expand-lg navbar-light bg-light">
<a href="{% url 'pantalla' %}" ><h3>DeportesColina</h3></a>
<a class="navbar-brand" href="{% url 'Solicitudes' %}"  style="margin-left: 25px;" >Solicitudes</a>
<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
  <span class="navbar-toggler-icon"></span>
</button>

<div class="collapse navbar-collapse" id="navbarSupportedContent">
  <ul class="navbar-nav mr-auto">

      <li class="nav-item active">
          <a class="nav-link" href="{% url 'Informes' %}">Informes<span
                  class="sr-only">(current)</span></a>
      </li>

      

      <li class="nav-item dropdown active ">
        <a class="nav-link dropdown-toggle cuPC1"  id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
          Usuarios
        </a>
        <div class="dropdown-menu " aria-labelledby="navbarDropdown">           
          <a class="dropdown-item " href="{% url 'Registro' %}" >Crear Usuarios</a>
          <a class="dropdown-item " href="{% url 'ListaUsu' %}">Modificar Usuarios</a>
      </div>
      </li>

      <li class="nav-item dropdown active ">
        <a class="nav-link dropdown-toggle cuPC1"  id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
          Ejercicios
        </a>
        <div class="dropdown-menu " aria-labelledby="navbarDropdown">           
          <a class="dropdown-item " href="{% url 'CrearEjer' %}" >Crear Ejercicios</a>
          <a class="dropdown-item " href="{% url 'ListaEje' %}">Modificar Ejercicios</a>
          
      </div>
      </li>

      <li class="nav-item dropdown active ">
        <a class="nav-link dropdown-toggle cuPC1"  id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
          Dietas
        </a>
        <div class="dropdown-menu " aria-labelledby="navbarDropdown">           
          <a class="dropdown-item " href="{% url 'CrearDie' %}" >Crear Dietas</a>
          <a class="dropdown-item " href="{% url 'ListaDie' %}">Modificar Dietas</a>
      </div>
      </li>

      <li class="nav-item dropdown active ">
        <a class="nav-link dropdown-toggle cuPC1"  id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
          Noticias
        </a>
        <div class="dropdown-menu " aria-labelledby="navbarDropdown">           
          <a class="dropdown-item " href="{% url 'CrearNot' %}" >Crear Noticias</a>
          <a class="dropdown-item " href="{% url 'ListaNot' %}">Modificar Noticias</a>
      </div>
      </li>

      <li class="nav-item active">
        <a class="nav-link" href="{% url 'login' %}">Cerrar Sesión<span
                class="sr-only">(current)</span></a>
    </li>
    
  </ul>
  
</nav>
</div>
<br>

<div class="container">
  <div class="container">
    <div class="container">
  <form action="" method="POST" enctype="multipart/form-data" class="fondoform" id="FormModiUsuarios" name="FormModiUsuarios">
      {% csrf_token %}
      <h1 class="centrar letraLo" style="text-align: center;">Modificar Usuario </h1>

      <div class="row" style="margin-top: -15px;">
        <div class="col-md-4 col-sm-4">
          {% if usuarios.imagen != '' %}
          <div class="grupo">
              <label for="" ><h5 style="color: #000000;">Foto de perfil actual</h5></label><br>
              <img src="{{ usuarios.imagen }}"  alt="Avatar" style="width:150px;height:150px;">
              </div>
        {% endif %}
        </div>
        <div class="col-md-4 col-sm-4">
          <div class="grupo">
            <label>Codigo Usuario</label>
            <input type="text" class="form-control"  value="{{ usuarios.codigo }}" id="id" name="id" readonly>
            <span class="barra"></span>
        </div>
        </div>
        <div class="col-md-4 col-sm-4"></div>
      </div>

      <div class="row" style="margin-top: -55px;"> 
          <div class="col">
              <div class="grupo">
                  <label>Nombre</label>
                  <input type="text" class="form-control" required value="{{ usuarios.nombre }}" id="nombre" name="nombre">
                  <span class="barra"></span>
              </div>
          </div>
          <div class="col">
              <div class="grupo">
                  <label>Apellido</label>
                  <input type="text" class="form-control" required value="{{ usuarios.apellido }}" id="apellido" name="apellido">
                  <span class="barra"></span>
              </div>
          </div>
      </div>

      <div class="row" style="margin-top: -55px;">
          <div class="col">
              <div class="grupo">
                  <label>Rut</label>
                  <input type="number" class="form-control" required value="{{ usuarios.rut }}" id="rut" name="rut" readonly>
                  <span class="barra"></span>
              </div>
          </div>
          <div class="col">
              <div class="grupo">
                  <label>Dígito Verificador</label>
                  <input type="text" class="form-control" required value="{{ usuarios.dv }}" id="dv" name="dv" readonly>
                  <span class="barra"></span>
              </div>
          </div>
      </div>

      <div class="row" style="margin-top: -55px;">
          <div class="col">
              <div class="grupo">
                  <label>Correo</label>
                  <input type="text" class="form-control" required value="{{ usuarios.correo }}" id="correo" name="correo">
                  <span class="barra"></span>
              </div>
          </div>
          <div class="col">
              <div class="grupo">
                  <label>Teléfono</label>
                  <input type="number" class="form-control" required value="{{ usuarios.telefono }}" id="telefono" name="telefono">
                  <span class="barra"></span>
              </div>
          </div>
      </div>

      <div class="row" style="margin-top: -55px;">
        <div class="col">
          <div class="grupo">
            <label>Horario</label>
            <input type="date" name="horarioU" id="horarioU" value="{{usuarios.horarioU}}" required>
            <span class="barra"></span>
        </div>
        </div>
        <div class="col">
          <div class="grupo">
            <label>Rol</label>
            <select class="form-control" name="RolC" id="RolC">
                {% if usuarios.rol == "1" %}
                <option value="1" selected>Cliente</option>
                <option value="2">Administrador</option>
                <option value="3">Administrador de Comunidad</option>
                {% elif usuarios.rol == "2" %}
                <option value="1">Cliente</option>
                <option value="2" selected>Administrador</option>
                <option value="3">Administrador de Comunidad</option>
                {% elif usuarios.rol == "3" %}
                <option value="1">Cliente</option>
                <option value="2">Administrador</option>
                <option value="3" selected>Administrador de Comunidad</option>
                {% endif %}
            </select>
        </div>
        
        
        </div>
    </div>

      
    <div class="row">
      <div class="col-md-4"></div>
        <div class="col-md-4">
            <input type="submit" value="Enviar" class="btn btn letraLo" style="text-align: center; color: rgb(255, 255, 255); background-color: rgb(97, 97, 97); margin-left: auto;">
        </div>
        <div class="col-md-4"></div>
    </div>
      <p class="warnings" id="mensaje_ModificarUsuarios"></p>
      <p class="warnings " id="mensaje"></p>

  </form><br>

</div></div></div>


 <!--
  <button onclick="cambiarRol()">Cambiar Rol</button>
<script>
  function cambiarRol() {
      var nuevoRol = document.getElementById('RolC').value;
      var idUsuario = "{{ usuarios.codigo }}";

      fetch('/cambiar-rol/', {
          method: 'POST',
          headers: {
              'Content-Type': 'application/json',
              'X-CSRFToken': '{{ csrf_token }}'
          },
          body: JSON.stringify({
              idUsuario: idUsuario,
              nuevoRol: nuevoRol
          })
      })
      .then(response => response.json())
      .then(data => {
          if (data.success) {
              alert('Rol cambiado exitosamente');
              // Aquí puedes realizar alguna acción adicional, como recargar la página
          } else {
              alert('Error al cambiar el rol');
          }
      })
      .catch(error => {
          console.error('Error:', error);
          alert('Error al cambiar el rol');
      });
  }
</script>-->  









    
    <script src="/static/aplicacion/Validaciones/Usuarios.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-Fy6S3B9q64WdZWQUiU+q4/2Lc9npb8tCaSX9FK7E8HnRr0Jz8D6OP9dO5Vg3Q9ct" crossorigin="anonymous"></script>
</body>
</html>